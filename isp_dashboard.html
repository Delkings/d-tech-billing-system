<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>D-TECH ISP — Super Admin</title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
<style>
  :root{ --blue:#0052cc; --orange:#ff7f00; --red:#d9534f; --bg:#071026; --card:#0f1724; }
  *{box-sizing:border-box}
  body{ margin:0; font-family: Inter, Arial, sans-serif; background:var(--bg); color:#eaf2ff; }

  /* SIDEBAR */
  .sidebar{ position:fixed; left:0; top:0; width:260px; height:100vh; overflow-y:auto; padding:18px; background:linear-gradient(180deg, rgba(0,82,204,0.18), rgba(0,0,0,0.16)); backdrop-filter:blur(6px); border-right:1px solid rgba(255,255,255,0.03); }
  .brand { background: linear-gradient(135deg,var(--orange),var(--blue)); color:#031025; padding:18px; border-radius:10px; text-align:left; }
  .brand h3{ margin:0; font-size:16px; }
  .brand p{ margin:6px 0 0; font-size:12px; opacity:0.9; }
  .nav-group{ margin-top:20px; }
  .nav-title{ color:#bcd2ff; font-weight:700; margin:8px 4px; font-size:13px; }
  .nav-item{ display:flex; align-items:center; gap:12px; padding:12px; margin:8px 4px; border-radius:10px; color:#eaf2ff; text-decoration:none; background:rgba(255,255,255,0.02); }
  .nav-item:hover{ background: rgba(255,127,0,0.07); transform:translateX(6px); }
  .nav-item .icon{ width:28px; text-align:center; }
  .badge-new{ background:var(--red); color:white; padding:2px 6px; border-radius:6px; font-size:11px; margin-left:auto; }
  .sidebar::-webkit-scrollbar{ width:8px } .sidebar::-webkit-scrollbar-thumb{ background:rgba(255,255,255,0.04); border-radius:8px }

  /* MAIN */
  .main{ margin-left:260px; padding:22px; min-height:100vh; }
  .topbar{ display:flex; justify-content:space-between; align-items:center; gap:12px; }
  .title{ font-size:30px; color:var(--blue); font-weight:800 }
  .top-controls{ display:flex; gap:12px; align-items:center }
  .btn{ padding:10px 14px; border-radius:10px; border:0; cursor:pointer; font-weight:700 }
  .btn-topup{ background:#2bd67b; color:#042316 }
  .theme-toggle{ background:linear-gradient(180deg,#2c2c55,#0f2341); padding:8px; border-radius:999px }

  /* LAYOUT */
  .grid-4{ display:grid; grid-template-columns:repeat(4,1fr); gap:14px; margin-top:18px }
  .card{ background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.02); padding:16px; border-radius:12px; }
  .card h4{ margin:0 0 8px; color:var(--blue) }
  .stat-large{ font-size:28px; font-weight:800 }
  .muted{ color:#9fb7d6; font-size:13px }

  /* sections */
  .two-col{ display:grid; grid-template-columns:2fr 1fr; gap:16px; margin-top:16px }
  .chart{ height:200px; }
  .small-grid{ display:grid; grid-template-columns:repeat(2,1fr); gap:12px; margin-top:12px }
  .widget{ margin-bottom:12px }

  /* tables */
  table{ width:100%; border-collapse:collapse; color:#eaf2ff }
  th,td{ padding:10px 8px; text-align:left; border-bottom:1px solid rgba(255,255,255,0.03); font-size:13px }
  th{ background:rgba(255,255,255,0.02); color:#fff }
  .actions button{ margin-right:8px }

  /* footer widgets */
  .full-width{ margin-top:18px }

  /* responsive */
  @media (max-width:1000px){ .grid-4{ grid-template-columns:repeat(2,1fr) } .two-col{ grid-template-columns:1fr } }
  @media (max-width:720px){ .sidebar{ transform:translateX(-110%); position:fixed } .sidebar.open{ transform:translateX(0) } .main{ margin-left:0; padding:12px } .toggle-mobile{ display:inline-block } }

  .toggle-mobile{ display:none }
</style>
</head>
<body>

<!-- SIDEBAR -->
<aside class="sidebar" id="sidebar">
  <div class="brand">
    <!-- local image - using the uploaded file path -->
    <img src="/mnt/data/lopi.PNG" alt="brand" style="width:100%;border-radius:8px;margin-bottom:10px">
    <h3>Good Morning ☀️<br>DELTECH NETWORKS WiFi!</h3>
    <p style="margin:6px 0 0; font-size:13px; color:rgba(0,0,0,0.6)">Your courage builds success!</p>
  </div>

  <a class="nav-item" href="#"><span class="icon"><i class="fa fa-home"></i></span> Dashboard</a>

  <div class="nav-group">
    <div class="nav-title">Finance</div>
    <a class="nav-item" href="#"><span class="icon"><i class="fa fa-credit-card"></i></span> Transactions</a>
    <a class="nav-item" href="#"><span class="icon"><i class="fa fa-chart-line"></i></span> Income</a>
  </div>

  <div class="nav-group">
    <div class="nav-title">Hotspot</div>
    <a class="nav-item" href="#"><span class="icon"><i class="fa fa-box"></i></span> Packages</a>
    <a class="nav-item" href="#"><span class="icon"><i class="fa fa-ticket-alt"></i></span> Vouchers</a>
    <a class="nav-item" href="#"><span class="icon"><i class="fa fa-user-plus"></i></span> Add User</a>
    <a class="nav-item" href="#"><span class="icon"><i class="fa fa-network-wired"></i></span> Roaming Monitor <span class="badge-new">NEW</span></a>
  </div>

  <div class="nav-group">
    <div class="nav-title">PPPoE</div>
    <a class="nav-item" href="#"><span class="icon"><i class="fa fa-signal"></i></span> Plans</a>
    <a class="nav-item" href="#"><span class="icon"><i class="fa fa-users"></i></span> Users</a>
  </div>

  <div class="nav-group">
    <div class="nav-title">Routers & Devices</div>
    <a class="nav-item" href="#"><span class="icon"><i class="fa fa-wifi"></i></span> Connected Routers</a>
    <a class="nav-item" href="#"><span class="icon"><i class="fa fa-user"></i></span> Connected Users</a>
    <a class="nav-item" href="#"><span class="icon"><i class="fa fa-cog"></i></span> Router Setup</a>
  </div>
</aside>

<!-- MAIN -->
<main class="main">
  <div class="topbar">
    <div class="title">Welcome to Meawlan!</div>
    <div class="top-controls">
      <button class="btn btn-topup"><i class="fa fa-wallet"></i> Top Up Wallet</button>
      <div class="theme-toggle"><i class="fa fa-moon"></i></div>
      <button class="btn toggle-mobile" id="mobileToggle">☰</button>
    </div>
  </div>

  <!-- account cards -->
  <section class="grid-4">
    <div class="card">
      <h4>Account Information</h4>
      <div style="display:flex;justify-content:space-between;align-items:center;">
        <div>
          <div style="font-weight:800;font-size:16px">DELTECH NETWORKS</div>
          <div class="muted">Active • Monthly</div>
          <div style="margin-top:8px"><span class="chip" style="background:rgba(0,0,0,0.25);padding:6px;border-radius:8px;color:#fff">Trial: 7 days left</span></div>
        </div>
        <div>
          <div style="background:rgba(0,0,0,0.18);padding:10px;border-radius:8px;color:var(--orange);font-weight:800">Top Up</div>
        </div>
      </div>
    </div>

    <div class="card">
      <h4>Trial Period</h4>
      <div class="stat-large">7 <span class="muted" style="font-size:14px">days left</span></div>
    </div>

    <div class="card">
      <h4>Token Balance</h4>
      <div class="stat-large" style="color:var(--orange)">0</div>
      <div class="muted">Daily: 20 tokens</div>
    </div>

    <div class="card">
      <h4>SMS Balance</h4>
      <div class="stat-large" style="color:var(--blue)">0</div>
      <div class="muted">This month: 0 sent</div>
    </div>

    <div class="card">
      <h4>Transaction Wallet</h4>
      <div class="stat-large" style="color:var(--orange)">KES 0</div>
      <div class="muted">Click to top up</div>
    </div>

    <div class="card">
      <h4>PPPoE Clients</h4>
      <div style="display:flex;gap:12px;margin-top:8px">
        <div class="card" style="padding:12px;background:rgba(0,0,0,0.12)"><div style="font-weight:800;color:var(--blue)">0</div><div class="muted">Active</div></div>
        <div class="card" style="padding:12px;background:rgba(0,0,0,0.12)"><div style="font-weight:800;color:var(--orange)">0</div><div class="muted">Inactive</div></div>
        <div class="card" style="padding:12px;background:rgba(0,0,0,0.12)"><div style="font-weight:800;color:var(--red)">0</div><div class="muted">Total</div></div>
      </div>
      <div class="muted" style="margin-top:8px">Monthly Charge: KES 0</div>
    </div>
  </section>

  <!-- main two column -->
  <section class="two-col">
    <div>
      <div class="card">
        <h4>Monthly Income (Last 12 months)</h4>
        <div class="chart" id="chartMonthly"><canvas id="chartMonthlyCanvas"></canvas></div>
      </div>

      <div class="small-grid">
        <div class="card">
          <h4>Weekly Income</h4>
          <div class="chart"><canvas id="chartWeeklyCanvas"></canvas></div>
        </div>
        <div class="card">
          <h4>Daily Sales (24 hours)</h4>
          <div class="chart"><canvas id="chartDailyCanvas"></canvas></div>
        </div>
      </div>

      <div class="small-grid">
        <div class="card">
          <h4>Usage Patterns (hours)</h4>
          <div class="chart"><canvas id="chartUsageCanvas"></canvas></div>
        </div>
        <div class="card">
          <h4>Router Health</h4>
          <div class="chart"><canvas id="chartHealthCanvas"></canvas></div>
        </div>
      </div>

    </div>

    <aside>
      <div class="widget card">
        <h4>Hotspot Users</h4>
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div><div style="font-weight:800;color:var(--orange)">0</div><div class="muted">Active / Total</div></div>
          <div><button class="btn btn-accent" onclick="openModal('modalHotspot')">Manage</button></div>
        </div>
        <table style="margin-top:10px"><thead><tr><th>Name</th><th>Status</th></tr></thead><tbody><tr><td>client1</td><td>active</td></tr></tbody></table>
      </div>

      <div class="widget card">
        <h4>Transactions</h4>
        <div class="muted">Latest payments</div>
        <table style="margin-top:8px"><thead><tr><th>User</th><th>Amount</th></tr></thead><tbody><tr><td>alpha</td><td>Ksh 1200</td></tr></tbody></table>
        <div style="margin-top:8px"><button class="btn btn-accent" onclick="openModal('modalTransactions')">View All</button></div>
      </div>

      <div class="widget card">
        <h4>Bulk SMS</h4>
        <div class="muted">Send notifications to customers</div>
        <div style="margin-top:8px"><button class="btn btn-accent" onclick="openModal('modalBulkSms')">Send SMS</button></div>
      </div>

      <div class="widget card">
        <h4>Wallet</h4>
        <div style="display:flex;justify-content:space-between;align-items:center"><div style="font-weight:800;color:var(--orange)">KES 0</div><div class="muted">Mpesa linked</div></div>
        <div style="margin-top:8px;display:flex;gap:8px"><button class="btn btn-primary" onclick="openModal('modalWallet')">History</button></div>
      </div>
    </aside>
  </section>

  <!-- PPPoE table -->
  <section class="card full-width">
    <h4>PPPoE Users</h4>
    <div class="muted">Manage PPPoE user stations</div>
    <table style="margin-top:10px"><thead><tr><th>Username</th><th>Plan</th><th>Status</th><th>Actions</th></tr></thead>
      <tbody id="pppoeList"><tr><td>pppoe_user1</td><td>Plan B</td><td>Active</td><td><button class="btn btn-ghost" onclick="openManagePppoe(this)">Manage</button><button class="btn btn-danger" onclick="deletePppoe(this)">Delete</button></td></tr></tbody>
    </table>
  </section>

</main>

<!-- MODALS -->
<div id="modalHotspot" class="modal-overlay" style="display:none;">
  <div class="modal"><h3>Manage Hotspot</h3><p class="muted">Active sessions and actions.</p><div style="margin-top:10px"><button class="btn btn-primary" onclick="closeModal('modalHotspot')">Close</button></div></div>
</div>

<div id="modalAddPppoe" class="modal-overlay" style="display:none;">
  <div class="modal"><h3>Add PPPoE User</h3><label class="muted">Username</label><input id="newPppUser" style="width:100%;padding:8px;margin-top:6px;border-radius:6px;background:transparent;border:1px solid rgba(255,255,255,0.04);color:#fff"><label class="muted">Plan</label><select id="newPppPlan" style="width:100%;padding:8px;margin-top:6px;background:transparent;color:#fff;border-radius:6px;border:1px solid rgba(255,255,255,0.04)"><option>Plan A</option><option>Plan B</option></select><div style="margin-top:10px;display:flex;gap:8px"><button class="btn btn-primary" onclick="addPppoeUser()">Create</button><button class="btn btn-ghost" onclick="closeModal('modalAddPppoe')">Cancel</button></div></div>
</div>

<div id="modalManagePppoe" class="modal-overlay" style="display:none;"><div class="modal"><h3>Manage PPPoE</h3><p id="managePppName" class="muted"></p><div style="margin-top:8px;display:flex;gap:8px"><button class="btn btn-accent" onclick="togglePppStatus()">Toggle Suspend</button><button class="btn btn-danger" onclick="confirmDeletePpp()">Delete</button><button class="btn btn-ghost" onclick="closeModal('modalManagePppoe')">Close</button></div></div></div>

<div id="modalBulkSms" class="modal-overlay" style="display:none;"><div class="modal"><h3>Send Bulk SMS</h3><label class="muted">Message</label><textarea id="smsText" style="width:100%;height:90px;padding:8px;margin-top:6px;border-radius:6px;background:transparent;color:#fff;border:1px solid rgba(255,255,255,0.04)"></textarea><div style="margin-top:8px;display:flex;gap:8px"><button class="btn btn-accent" onclick="sendBulkSMS()">Send</button><button class="btn btn-ghost" onclick="closeModal('modalBulkSms')">Cancel</button></div></div></div>

<div id="modalTransactions" class="modal-overlay" style="display:none;"><div class="modal"><h3>Transactions</h3><table style="margin-top:8px"><thead><tr><th>Date</th><th>User</th><th>Amount</th></tr></thead><tbody><tr><td>2025-11-01</td><td>alpha</td><td>Ksh 1200</td></tr></tbody></table><div style="margin-top:8px"><button class="btn btn-ghost" onclick="closeModal('modalTransactions')">Close</button></div></div></div>

<div id="modalWallet" class="modal-overlay" style="display:none;"><div class="modal"><h3>Wallet History</h3><table style="margin-top:8px"><thead><tr><th>Date</th><th>Amount</th></tr></thead><tbody><tr><td>2025-11-01</td><td>Ksh 10,000</td></tr></tbody></table><div style="margin-top:8px"><button class="btn btn-ghost" onclick="closeModal('modalWallet')">Close</button></div></div></div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
// sidebar mobile toggle
const side = document.getElementById('sidebar');
const mobileToggle = document.getElementById('mobileToggle');
if(mobileToggle){ mobileToggle.addEventListener('click', ()=>{ side.classList.toggle('open'); }) }

function openModal(id){ const el=document.getElementById(id); if(!el) return; el.style.display='flex'; document.documentElement.style.setProperty('--sidebar-w', getComputedStyle(side).width || '260px'); }
function closeModal(id){ const el=document.getElementById(id); if(el) el.style.display='none'; }

// PPPoE functions
function addPppoeUser(){ const name=document.getElementById('newPppUser').value.trim(); const plan=document.getElementById('newPppPlan').value; if(!name){ alert('Enter username'); return } const tbody=document.getElementById('pppoeList'); const tr=document.createElement('tr'); tr.innerHTML=`<td>${name}</td><td>${plan}</td><td>Active</td><td><button class="btn btn-ghost" onclick="openManagePppoe(this)">Manage</button><button class="btn btn-danger" onclick="deletePppoe(this)">Delete</button></td>`; tbody.appendChild(tr); document.getElementById('newPppUser').value=''; closeModal('modalAddPppoe'); }
let _manageRow=null; function openManagePppoe(btn){ const tr=btn.closest('tr'); _manageRow=tr; document.getElementById('managePppName').innerText=tr.children[0].innerText; openModal('modalManagePppoe'); }
function togglePppStatus(){ if(!_manageRow) return; const c=_manageRow.children[2]; c.innerText = c.innerText==='Active' ? 'Suspended':'Active'; closeModal('modalManagePppoe'); }
function deletePppoe(btn){ if(!confirm('Delete this PPPoE user?')) return; const tr=btn.closest('tr'); tr.parentNode.removeChild(tr); }
function confirmDeletePpp(){ if(!confirm('Confirm delete?')) return; if(_manageRow){ _manageRow.parentNode.removeChild(_manageRow); _manageRow=null } closeModal('modalManagePppoe'); }

function sendBulkSMS(){ const t=document.getElementById('smsText').value.trim(); if(!t){ alert('Enter message'); return } alert('Queued: '+ (t.length>40? t.slice(0,40)+'...': t)); closeModal('modalBulkSms'); }

// Charts
window.addEventListener('load', ()=>{
  const opt = { responsive:true, maintainAspectRatio:false, plugins:{legend:{display:false}}, scales:{ x:{ ticks:{ color:'#bcd2ff' }}, y:{ ticks:{ color:'#bcd2ff' } } } };
  // Monthly
  new Chart(document.getElementById('chartMonthlyCanvas').getContext('2d'), { type:'line', data:{ labels:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'], datasets:[{label:'Income', data:[120000,130000,115000,140000,150000,160000,170000,180000,165000,190000,200000,210000], borderColor:'rgba(255,127,0,1)', backgroundColor:'rgba(255,127,0,0.08)', fill:true, tension:0.3 }] }, options:opt });
  // Weekly
  new Chart(document.getElementById('chartWeeklyCanvas').getContext('2d'), { type:'bar', data:{ labels:['Mon','Tue','Wed','Thu','Fri','Sat','Sun'], datasets:[{ data:[7000,8000,6000,12000,10000,9000,4800], backgroundColor:'rgba(0,82,204,0.9)' }] }, options:opt });
  // Daily 24 hours
  const hours = Array.from({length:24},(_,i)=>String(i).padStart(2,'0'));
  new Chart(document.getElementById('chartDailyCanvas').getContext('2d'), { type:'bar', data:{ labels:hours, datasets:[{ data: hours.map(()=> Math.floor(Math.random()*1200)+200), backgroundColor:'rgba(255,127,0,0.95)' }] }, options:opt });
  // Usage (hourly line)
  const usage = hours.map((_,i)=> Math.floor( Math.sin(i/3)*50 + Math.random()*70 + 80 ));
  new Chart(document.getElementById('chartUsageCanvas').getContext('2d'), { type:'line', data:{ labels:hours, datasets:[{ data:usage, borderColor:'rgba(0,82,204,1)', backgroundColor:'rgba(0,82,204,0.06)', pointRadius:2, tension:0.3 }] }, options:opt });
  // Router health radar
  new Chart(document.getElementById('chartHealthCanvas').getContext('2d'), { type:'radar', data:{ labels:['CPU','Memory','Uptime','Connections','Packet Loss'], datasets:[{ label:'Router A', data:[80,65,99,60,5], borderColor:'rgba(0,82,204,1)', backgroundColor:'rgba(0,82,204,0.08)' },{ label:'Router B', data:[60,45,95,50,15], borderColor:'rgba(217,83,79,1)', backgroundColor:'rgba(217,83,79,0.08)' }] }, options:{ ...opt, plugins:{legend:{position:'bottom'}} } });
});
</script>
</body>
</html>
